# 譜面ファイル(JSON)の書き方

## JSONの書き方

基本的には自分で調べてください。僕は[こちらのサイト](http://www.trident-game.com/blog/2015/10/14/%E3%80%90%E8%BC%AA%E8%AC%9B%E3%80%91json%E3%81%AE%E6%9B%B8%E3%81%8D%E6%96%B9/)を参考に書きました。

## ノーツの動き方

全てのノーツはそれぞれ何らかの円周上を動いていると考えます。また、以下の画像のようにノーツは直線に並ぶことが多く、直線毎に分割することが可能です。

![](/Users/fms_eraser/Downloads/diva.jpg)

## 譜面ファイルの内部構造

譜面ファイルの中身は`Group`オブジェクトが入った`Groups`という配列で表現しています。

### Group

`Group`は`Route`と`Notes`の集まりです。`Group`は各点線を１つの集合とみなしたものです。

### Route

ノーツの描く軌道や、点線の角度などの情報を保持するオブジェクトです。

- `center`
	- ノーツが動く軌道の円の中心座標オブジェクト
	- 直交座標系で指定
	- `{"x": 100, "y": 200}`のように書く
- `pos`
	- 直交座標系で最初のノーツの座標を指定する
	- `center`と書き方は同じ
- `speed`
	- ノーツの動く速さ
	- グループ内で一定
- `theta`
	- ノーツが並ぶ直線の傾き
	- 極座標系で表現されている
- `direction`
	- ノーツの回転方向
	- 1 : 時計回り
	- -1 : 反時計回り
- `timing`
	- 最初のノーツが押される理想のタイミング
	- 曲が始まってからの時間を指定
- `figure`
	- 最初のノーツの形
	- 0:◯, 1:X, 2:△, 3:◻
- `duration`
	- 最初のノーツの長押しのノーツのときのみ記載
	- 押してる時間を指定

### Notes

グループの先頭のノーツを除くノーツは`Notes`という配列の中に格納します。１つ前のノーツとの差を指定してください。

- `distance`
	- １つ前のノーツとの距離を指定する
	- 極座標系で表現されている
	- 座標の変位は`(distance, theta)`
	- 負数を指定することも可能
- `time`
	- 時間の変位を指定する
	- 正の整数のみ
- `figure`
	- ノーツの形
	- 0:◯, 1:X, 2:△, 3:◻
- `duration`
	- ノーツの長押しのノーツのときのみ記載
	- 押してる時間を指定

## JSONサンプル

```json

{
    "Groups": [
        {
            "Route": {
                "center": {
                    "x": -100, 
                    "y": -100
                }, 
                "pos": {
                    "x": 50, 
                    "y": 250
                }, 
                "direction": 1, 
                "speed": 70, 
                "theta": 0.5,
                "time": 30,
                "figure": 0
            }, 
            "Notes": [
                {
                    "distance": 60, 
                    "figure": 0, 
                    "time": 5
                }, 
                {
                    "distance": 60, 
                    "figure": 0, 
                    "time": 5
                },
                
                :
                
            ]
        },
        
        :
        
    ]
}
```